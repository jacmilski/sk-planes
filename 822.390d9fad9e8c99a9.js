"use strict";(self.webpackChunksk_planes=self.webpackChunksk_planes||[]).push([[822],{7822:(Q,p,r)=>{r.r(p),r.d(p,{FlightsModule:()=>Y});var C=r(9709),g=r(9808),s=r(3075),a=r(8966),t=r(5e3),m=r(1402),h=r(8326),d=r(7423);function F(i,l){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.xp6(1),t.Oqu(e.name)}}let T=(()=>{class i{constructor(e,o,n){this.router=e,this.dialogRef=o,this.data=n,this.flight=this.data}closeDetails(){this.dialogRef.close()}goToEditFlight(){this.dialogRef.close(),this.router.navigate(["/dashboard/flights",this.flight.key])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.F0),t.Y36(a.so),t.Y36(a.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-details"]],decls:14,vars:2,consts:[[1,"row"],[1,"col"],[1,"float-right",3,"click"],[1,"label"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"float-right",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3"),t._uU(3," FLIGHT DETAILS "),t.TgZ(4,"mat-icon",2),t.NdJ("click",function(){return o.closeDetails()}),t._uU(5,"close"),t.qZA(),t.qZA(),t.TgZ(6,"p",3),t._uU(7),t.qZA(),t.TgZ(8,"p",3),t._uU(9,"Crew: "),t.qZA(),t.TgZ(10,"ul"),t.YNc(11,F,2,1,"li",4),t.qZA(),t.TgZ(12,"button",5),t.NdJ("click",function(){return o.goToEditFlight()}),t._uU(13," EDIT FLIGHT "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.hij("Code: ",o.flight.code,""),t.xp6(4),t.Q6J("ngForOf",o.flight.crew))},directives:[h.Hw,g.sg,d.lW],styles:[""]}),i})();var f=r(1271),u=r(2730),A=r(655);class _{isErrorState(l,e){return l&&l.invalid}}const b=i=>i.value.startsWith("SK")?null:{incorrectCode:!0};var Z=r(7322),q=r(7531),w=r(7446),x=r(4102),y=r(508);function M(i,l){if(1&i&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function U(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"div",17),t.TgZ(2,"div",12),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",18),t.NdJ("click",function(){const c=t.CHM(e).index;return t.oxw().removeCrewMember(c)}),t._uU(6," delete_forever "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",19),t.TgZ(8,"div",20),t.TgZ(9,"mat-form-field"),t._UZ(10,"input",21),t.qZA(),t.qZA(),t.TgZ(11,"div",6),t.TgZ(12,"mat-form-field"),t.TgZ(13,"mat-select",22),t.YNc(14,M,2,2,"mat-option",23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=l.index,o=t.oxw();t.xp6(4),t.hij("Crew Member - ",e+1,""),t.xp6(3),t.Q6J("formGroupName",e),t.xp6(7),t.Q6J("ngForOf",o.jobs)}}let v=(()=>{class i{constructor(e){this.formBuilder=e,this.matcher=new _,this.editMode=!1,this.jobs=[{label:"Stewaredess",value:"stewaredess"},{label:"Senior Cabin Crew",value:"senior_cabin_crew"},{label:"Pilot",value:"Pilot"},{label:"Co-Pilot",value:"Co-Pilot"},{label:"Mechanic",value:"Mechanic"}]}ngOnInit(){this.buildForm()}setFlight(e){const n=(0,A._T)(e,["key"]);this.form.patchValue(n),n.crew.forEach(c=>this.addCrewMember(c))}buildCrewMember(e={}){return this.formBuilder.group({name:e.name||"",job:e.job||""})}get crew(){return this.form.get("crew")}removeCrewMember(e){this.crew.removeAt(e)}addCrewMember(e){this.crew.push(this.buildCrewMember(e))}buildForm(){this.form=this.formBuilder.group({origin:["",{validators:[s.kI.required]}],destination:["",[s.kI.required]],departureTime:["",[s.kI.required]],returnTime:["",[s.kI.required]],code:["SK",[s.kI.required,s.kI.minLength(4),s.kI.maxLength(7),b]],additionalInformation:"",withSKPlanesDiscount:!1,crew:this.formBuilder.array(this.editMode?[]:[this.buildCrewMember()])})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(s.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-flight-form"]],inputs:{editMode:"editMode"},decls:35,vars:4,consts:[[3,"formGroup"],[1,"row"],[1,"col-sm-8"],["matInput","","formControlName","code","placeholder","Code"],["inputCode",""],[1,"mat-hint"],[1,"col-sm-4"],["matInput","","formControlName","origin","placeholder","Origin"],["matInput","","formControlName","destination","placeholder","Destination"],["matInput","","formControlName","departureTime","placeholder","Departure time"],["matInput","","formControlName","returnTime","placeholder","Return time"],["matInput","","formControlName","additionalInformation","placeholder","Additional Information"],[1,"col"],["formControlName","withSKPlanesDiscount"],["formArrayName","crew","class","crew-container shadow",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"mt-2",3,"click"],["formArrayName","crew",1,"crew-container","shadow"],[1,"row","crew-header"],[1,"float-right",3,"click"],[1,"row",3,"formGroupName"],[1,"col-sm-5"],["matInput","","formControlName","name","placeholder","Name"],["formControlName","job","placeholder","Job"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"mat-form-field"),t._UZ(4,"input",3,4),t.TgZ(6,"mat-hint",5),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"mat-form-field"),t._UZ(11,"input",7),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.TgZ(13,"mat-form-field"),t._UZ(14,"input",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",1),t.TgZ(16,"div",6),t.TgZ(17,"mat-form-field"),t._UZ(18,"input",9),t.qZA(),t.qZA(),t.TgZ(19,"div",6),t.TgZ(20,"mat-form-field"),t._UZ(21,"input",10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",1),t.TgZ(23,"div",2),t.TgZ(24,"mat-form-field"),t._UZ(25,"textarea",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",1),t.TgZ(27,"div",12),t.TgZ(28,"mat-checkbox",13),t._uU(29,"With SK Discount"),t.qZA(),t.qZA(),t.qZA(),t.YNc(30,U,15,3,"div",14),t.TgZ(31,"div",1),t.TgZ(32,"div",12),t.TgZ(33,"button",15),t.NdJ("click",function(){return o.addCrewMember()}),t._uU(34," Add crew member "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(5);t.Q6J("formGroup",o.form),t.xp6(7),t.AsE(" ",(n.value.length<4||n.value.length>7)&&o.form.dirty?n.value.length+"/7 but":n.value.length>=4||n.value.length<=7?n.value.length+"/7":""," ",0===n.value.length?"Code is required":n.value.length<4&&o.form.dirty?"minimum chars - 4":n.value.length>7?"maximum chars - 7":""," "),t.xp6(23),t.Q6J("ngForOf",o.crew.controls)}},directives:[s._Y,s.JL,s.sg,Z.KE,q.Nt,s.Fj,s.JJ,s.u,Z.bx,w.oG,g.sg,s.CE,h.Hw,s.x0,x.gD,y.ey,d.lW],styles:[".crew-container[_ngcontent-%COMP%]{margin-top:15px;padding:15px;background:white}.crew-header[_ngcontent-%COMP%]{margin-bottom:20px;font-weight:700}.mat-hint[_ngcontent-%COMP%]{color:red}"]}),i})();const k=["flightForm"];let N=(()=>{class i{constructor(e,o,n){this.toast=e,this.dialogRef=o,this.flightService=n}createFlight(){console.log(this.flightForm.form),this.flightService.addFlight(this.flightForm.form.value).then(()=>this.onCreateSuccess()).catch(e=>this.onCreateFailure(e))}onCreateSuccess(){this.dialogRef.close(),this.toast.open("Flight has been successfuly created","",{panelClass:"toast-success"})}onCreateFailure(e){console.log("Some error"),this.toast.open(e.message,"",{panelClass:"toast-failure"})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.ux),t.Y36(a.so),t.Y36(u.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-new-flight"]],viewQuery:function(e,o){if(1&e&&t.Gf(k,5),2&e){let n;t.iGM(n=t.CRH())&&(o.flightForm=n.first)}},decls:12,vars:1,consts:[["mat-dialog-title",""],["flightForm",""],[1,"row"],[1,"col"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1,"New Flight Creator"),t.qZA(),t.TgZ(2,"mat-dialog-content"),t._UZ(3,"app-flight-form",null,1),t.qZA(),t.TgZ(5,"mat-dialog-actions"),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"button",4),t._uU(9,"Cancel"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return o.createFlight()}),t._uU(11," Create "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(4);t.xp6(10),t.Q6J("disabled",!n.form.valid)}},directives:[a.uh,a.xY,v,a.H8,d.lW,a.ZT],styles:[""]}),i})(),O=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-flight-card"]],inputs:{flight:"flight"},decls:15,vars:4,consts:[[1,"card-container"],[1,"shadow","card-content"],[1,"row"],[1,"col"],[1,"origin"],[1,"destination"],[1,"time"],[1,"icon-container","shadow"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"p",4),t._uU(5),t.qZA(),t.TgZ(6,"p",5),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",2),t.TgZ(9,"div",3),t.TgZ(10,"p",6),t._uU(11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",7),t.TgZ(13,"mat-icon"),t._uU(14,"airplanemode_active"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.hij("from: ",o.flight.origin,""),t.xp6(2),t.hij("to: ",o.flight.destination,""),t.xp6(4),t.AsE("",o.flight.departureTime," - ",o.flight.returnTime,""))},directives:[h.Hw],styles:['@charset "UTF-8";[_nghost-%COMP%]{cursor:pointer}.card-container[_ngcontent-%COMP%]{margin-top:10px;padding:10px;position:relative}.card-content[_ngcontent-%COMP%]{padding:30px 20px;background:white}.icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;top:-10px;left:50%;height:50px;width:50px;background:white;border-radius:50%;z-index:10;border:1px solid grey;transform:translate(-50%)}.icon-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#00008b}.time[_ngcontent-%COMP%]{text-align:center;font-size:13px;color:gray}.destination[_ngcontent-%COMP%], .origin[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#ff1493}'],changeDetection:0}),i})();function S(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().showDetails(c)}),t._UZ(1,"app-flight-card",4),t.qZA()}if(2&i){const e=l.$implicit;t.xp6(1),t.Q6J("flight",e)}}let E=(()=>{class i{constructor(e,o){this.flightsService=e,this.dialog=o,this.isOpen=!1,this.flights$=this.flightsService.getFlights()}openNewFlightModal(){this.isOpen=!this.isOpen,this.dialog.open(N).afterClosed().subscribe(e=>{console.log(e),""===e&&(this.isOpen=!1)})}showDetails(e){this.dialog.open(T,{data:e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.U),t.Y36(a.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-flights"]],decls:5,vars:4,consts:[[1,"row","flights-container"],["class","col-sm-4",3,"click",4,"ngFor","ngForOf"],["mat-fab","","id","new-flight-btn",1,"accent",3,"click"],[1,"col-sm-4",3,"click"],[3,"flight"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,S,2,1,"div",1),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.openNewFlightModal()}),t._uU(4),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,2,o.flights$)),t.xp6(3),t.Oqu(o.isOpen?"-":"+"))},directives:[g.sg,O,d.lW],pipes:[g.Ov],styles:[".flights-container[_ngcontent-%COMP%]{padding-top:30px}#new-flight-btn[_ngcontent-%COMP%]{position:fixed;bottom:50px;right:50px;font-size:30px}"]}),i})();var J=r(8505);const I=["flightForm"],P=[{path:"",component:E},{path:":key",component:(()=>{class i{constructor(e,o,n,c){this.router=e,this.toast=o,this.route=n,this.flightsService=c}ngAfterViewInit(){this.loadFlight()}loadFlight(){this.flightsService.getFlight(this.route.snapshot.params.key).pipe((0,J.b)(o=>this.flightForm.setFlight(o))).subscribe(o=>this.flight=o)}onEditSuccess(){this.toast.open("The date of flight has been modified","",{panelClass:"toast-success"}),this.router.navigate(["/dashboard"])}onRemoveSuccess(){this.toast.open("The flight has been removed","",{panelClass:"toast-success"}),this.router.navigate(["/dashboard"])}onFailure(e){this.toast.open(e.message,"",{panelClass:"toast-failure"})}editFlight(){this.flightsService.editFlight(this.flight.key,this.flightForm.form.value).then(()=>this.onEditSuccess()).catch(this.onFailure.bind(this))}removeFlight(){this.flightsService.removeFlight(this.flight.key).then(this.onRemoveSuccess.bind(this)).catch(this.onFailure.bind(this))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.F0),t.Y36(f.ux),t.Y36(m.gz),t.Y36(u.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-flight"]],viewQuery:function(e,o){if(1&e&&t.Gf(I,5),2&e){let n;t.iGM(n=t.CRH())&&(o.flightForm=n.first)}},decls:19,vars:2,consts:[[1,"row"],[1,"col-9"],[1,"col-3","text-right","delete-div"],[1,"float-right","delete-icon",3,"click"],[3,"editMode"],["flightForm",""],[1,"col","text-right"],["mat-raised-button","",1,"mr-2","mb-4"],["mat-raised-button","","color","primary",1,"mb-4",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3"),t._uU(3,"Edit flight "),t.TgZ(4,"strong"),t._uU(5),t.qZA(),t._uU(6," details"),t.qZA(),t.qZA(),t.TgZ(7,"div",2),t._uU(8," remove flight "),t.TgZ(9,"mat-icon",3),t.NdJ("click",function(){return o.removeFlight()}),t._uU(10,"delete"),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"app-flight-form",4,5),t.TgZ(13,"div",0),t.TgZ(14,"div",6),t.TgZ(15,"button",7),t._uU(16,"RESET"),t.qZA(),t.TgZ(17,"button",8),t.NdJ("click",function(){return o.editFlight()}),t._uU(18,"SAVE"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Oqu(null==o.flight?null:o.flight.code),t.xp6(6),t.Q6J("editMode",!0))},directives:[h.Hw,v,d.lW],styles:[".delete-icon[_ngcontent-%COMP%]{color:#dc143c;font-size:36px;cursor:pointer}.delete-div[_ngcontent-%COMP%]{margin-top:30px;line-height:2.3}"]}),i})()}];let D=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.Bz.forChild(P)],m.Bz]}),i})(),Y=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez,C.q,s.u5,s.UX,D]]}),i})()}}]);